(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,a,t){e.exports=t(49)},36:function(e,a,t){},37:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(26),c=t.n(l),s=(t(36),t(1)),o=t(8),m=t(13),i=(t(37),t(10)),u=t(5),d=t.n(u),E=t(11),p=t(27),h=t(28),f=t(17),v=t.n(f),b=(t(39),t(41),{apiKey:"AIzaSyB8aptTy1vsfRI1t6UsEuIlXR5dqgB5t4A",authDomain:"cashflow-d0f82.firebaseapp.com",databaseURL:"https://cashflow-d0f82.firebaseio.com",projectId:"cashflow-d0f82",storageBucket:"cashflow-d0f82.appspot.com",messagingSenderId:"237822732162",appId:"1:237822732162:web:5b44f64d89787d028b919b",measurementId:"G-GE2ZZ3S3KZ"}),g=["\ud83e\udd55 Food","\ud83c\udf7b Drinks","\ud83c\udfae Videogames","\ud83d\udcad Other"],N=new(function(){function e(){Object(p.a)(this,e),v.a.initializeApp(b),this.auth=v.a.auth(),this.db=v.a.firestore()}return Object(h.a)(e,[{key:"register",value:function(){var e=Object(E.a)(d.a.mark(function e(a,t,n){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(t,n);case 2:return r=e.sent,this.setUserPrefs(r),e.next=6,r.user.updateProfile({displayName:a});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"setUserPrefs",value:function(e){var a=g;N.db.collection("users").doc(e.user.uid).set({categories:a})}},{key:"login",value:function(){var e=Object(E.a)(d.a.mark(function e(a,t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signInWithEmailAndPassword(a,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(E.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signOut();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(E.a)(d.a.mark(function e(a){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.sendPasswordResetEmail(a);case 2:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()}]),e}()),y=N,w=r.a.createContext(null),C=y;var x=function(){var e,a=r.a.useContext(w),t=a.user,n=a.firebase,l=r.a.useState(!1),c=Object(s.a)(l,2),m=c[0],u=c[1];function d(){u(!1)}return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(o.b,{to:"/",className:"navbar-item"},r.a.createElement("h3",{className:"has-text-grey"},r.a.createElement("span",{role:"img","aria-label":"cash emoji"},"\ud83d\udcb5")," cashflow.cool")),r.a.createElement("div",(e={role:"button","aria-label":"menu","aria-expanded":"false"},Object(i.a)(e,"aria-expanded","false"),Object(i.a)(e,"data-target","navbarBasicExample"),Object(i.a)(e,"className",m?"navbar-burger burger is-active":"navbar-burger burger"),Object(i.a)(e,"onClick",function(){return u(!m)}),e),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:m?"navbar-menu is-active":"navbar-menu",id:"navMenu"},t&&r.a.createElement("div",{className:"navbar-start"},r.a.createElement(o.b,{to:"/",className:"navbar-item",onClick:d},"Expenses"),r.a.createElement(o.b,{to:"/dashboard/",className:"navbar-item",onClick:d},"Dashboard")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},t?r.a.createElement("div",{onClick:function(){return n.logout()},className:"button"},"Log out"):r.a.createElement(o.b,{to:"/login/",className:"button"},"Log in"))))))},k=t(12);var S=function(e,a,t,n){var l=r.a.useState(e),c=Object(s.a)(l,2),o=c[0],m=c[1],u=r.a.useState({}),d=Object(s.a)(u,2),E=d[0],p=d[1],h=r.a.useState(!1),f=Object(s.a)(h,2),v=f[0],b=f[1];return r.a.useEffect(function(){v&&(0===Object.keys(E).length?(t(),b(!1)):b(!1))},[E]),{handleChange:function(e){e.persist(),m(function(a){return Object(k.a)({},a,Object(i.a)({},e.target.name,e.target.value))})},handleBlur:function(){var e=a(o);p(e)},handleSubmit:function(e){e.preventDefault(),console.log("in handle submit"),console.log(e.target.values);var t=a(o,n);p(t),b(!0)},values:o,errors:E,isSubmitting:v}};function O(e){var a={};return console.log("values . category"),console.log(e.category),e.amount&&isNaN(e.amount)&&(a.amount="Expense must be a numeric value"),e.amount||(a.amount="Please enter expense amount"),e.category&&"Category"!==e.category||(a.category="Please select a category first!"),a}var j=t(3),M=t.n(j),D={category:"",amount:"",business:"",paymentMethod:"",description:""};var A=function(e){var a=r.a.useContext(w),t=a.firebase,n=a.preferences,l=a.user,c=S(D,O,function(){if(l){var a=u.category,n=u.amount,r=u.business,c=u.paymentMethod,s=u.description,o=parseFloat(n,10),m={category:a,amount:o,business:r,paymentMethod:c,description:s,postedBy:{id:l.uid,name:l.displayName},created:Date.now(),monthCreated:M()(Date.now()).format("MMMM"),yearCreated:M()(Date.now()).format("YYYY"),dayCreated:M()(Date.now()).format("D"),actualDay:M()(Date.now()).format("dddd")};t.db.collection("expenses").add(m),console.log("i just added an expense")}else e.history.push("/login");u.amount="",u.business="",u.description="",u.paymentMethod="Debit Card"}),s=c.handleSubmit,m=c.handleChange,i=c.handleBlur,u=c.values,d=c.errors;return r.a.createElement("div",null,r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h3",{className:"has-text-grey"},"Add Expense"))),l?r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Category"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:m,value:u.category,name:"category"},r.a.createElement("option",null,"Category"),n&&n.map(function(e){return r.a.createElement("option",{key:e},e)})))),d.category&&r.a.createElement("p",{className:"has-text-danger"},d.category)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Amount"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"amount",onChange:m,onBlur:i,value:u.amount,placeholder:"How much was the expense?",autoComplete:"off",type:"text",className:d.amount?"input is-danger":"input"})),d.amount&&r.a.createElement("p",{className:"help is-danger"},r.a.createElement("span",{className:"icon has-text-danger"},r.a.createElement("i",{className:"fas fa-ban"})),d.amount)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Business"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"business",onChange:m,value:u.business,placeholder:"Where did the purchase take place?",autoComplete:"off",type:"text",className:"input"}),d.url&&r.a.createElement("p",{className:"has-text-danger"},d.url))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Payment Method"),r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"paymentMethod",value:"Debit Card",checked:"Debit Card"===u.paymentMethod,onChange:m}),r.a.createElement("span",{className:"radio-option"}," Debit Card")),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"paymentMethod",value:"Credit Card",checked:"Credit Card"===u.paymentMethod,onChange:m}),r.a.createElement("span",{className:"radio-option"}," Credit Card")),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"paymentMethod",value:"Shared Credit Card",checked:"Shared Credit Card"===u.paymentMethod,onChange:m}),r.a.createElement("span",{className:"radio-option"}," Shared Credit Card")),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"paymentMethod",value:"Cash",checked:"Cash"===u.paymentMethod,onChange:m}),r.a.createElement("span",{className:"radio-option"}," Cash")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"description",onChange:m,value:u.description,placeholder:"Any notes about the expense",autoComplete:"off",type:"text",className:"input"}),d.url&&r.a.createElement("p",{className:"has-text-danger"},d.url))),r.a.createElement("button",{className:"button full-width",type:"submit"},"Add Expense"))))):r.a.createElement(o.b,{to:"/login/",className:"nav-link"},r.a.createElement("h5",{className:"has-text-grey-light"},"login")))};var B=function(e){var a=e.expense,t=(e.index,r.a.useContext(w).firebase),n=r.a.useState(!1),l=Object(s.a)(n,2),c=l[0],o=l[1];return r.a.createElement("tr",{className:"is-fullwidth"},r.a.createElement("td",null,r.a.createElement("div",{className:"tag is-light"},a.category)),r.a.createElement("td",null,r.a.createElement("b",{className:"has-text-success"},"$",a.amount)),r.a.createElement("td",null,r.a.createElement("p",null," ",a.description)),r.a.createElement("td",{className:"has-text-right"},!c&&r.a.createElement("button",{className:"delete",onClick:function(){window.confirm("you sure you want to delete this expense?")&&t.db.collection("expenses").doc(a.id).delete().then(o(!0)).catch(function(e){return console.error("error deleting expense",e)})}})))};var Y=function(){var e=r.a.useContext(w),a=e.firebase,t=e.user,n=r.a.useState([]),l=Object(s.a)(n,2),c=l[0],o=l[1],m=r.a.useState([]),i=Object(s.a)(m,2),u=i[0],d=i[1],E=r.a.useState([]),p=Object(s.a)(E,2),h=p[0],f=p[1],v=r.a.useState(""),b=Object(s.a)(v,2),g=b[0],N=b[1],y=r.a.useState("1999"),C=Object(s.a)(y,2),x=C[0],S=C[1],O=r.a.useState("month-filter"),j=Object(s.a)(O,2),D=j[0],A=j[1],Y="filter-tag tag is-white is-primary";function P(e){var a=e.docs.map(function(e){return Object(k.a)({id:e.id},e.data())});d(a),o(a),function(e){var a=0;e.map(function(e){var t=parseFloat(e.amount);return a+=t}),f(a.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}(a)}function F(e){A(e.target.id),I(e.target.id)}function I(e){var a=M()(Date.now()).format("D").toString();switch(e){case"day-filter":var t=[];c.map(function(e){e.dayCreated===a&&t.push(e)}),o(t);break;case"week-filter":var n=[],r=0,l=0;switch(M()().format("dddd")){case"Sunday":r=a-0,l=a+6;break;case"Monday":r=a-1,l=a+5;break;case"Tuesday":r=a-2,l=a+4;break;case"Wednesday":r=a-3,l=a+3;break;case"Thursday":r=a-4,l=a+2;break;case"Friday":r=a-5,l=a+1;break;case"Saturday":r=a-6,l=a+0}u.map(function(e){e.dayCreated>=r&&e.dayCreated<=l&&n.push(e)}),o(n);break;case"month-filter":o(u)}}return r.a.useEffect(function(){t&&function(e){var n=M()(Date.now()).format("MMMM"),r=M()(Date.now()).format("YYYY");N(n),S(r),a.db.collection("expenses").where("postedBy.id","==",t.uid).where("monthCreated","==",n).where("yearCreated","==",r).orderBy("created","desc").onSnapshot(P)}()},[t]),r.a.useEffect(function(){I(D)},[c.length]),r.a.createElement("div",{className:"expenses-list"},r.a.createElement("h3",{className:"has-text-grey"},g," ",x),r.a.createElement("p",null,g," total spending: ",r.a.createElement("span",{className:"has-text-success"},r.a.createElement("b",null,"$",h))),r.a.createElement("div",{className:"filter has-text-grey"},r.a.createElement("small",null,"FILTER:"),r.a.createElement("span",{id:"day-filter",className:"day-filter"===D?Y:"filter-tag tag is-white",onClick:F},"Day"),r.a.createElement("span",{id:"week-filter",className:"week-filter"===D?Y:"filter-tag tag is-white",onClick:F},"Week"),r.a.createElement("span",{id:"month-filter",className:"month-filter"===D?Y:"filter-tag tag is-white",onClick:F},"Month")),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,c.map(function(e,a){return r.a.createElement(B,{key:e.id,expense:e,index:a+1})}))))};var P=function(){var e=r.a.useContext(w),a=(e.firebase,e.user);return r.a.createElement("div",{className:"Home section"},r.a.createElement("div",{className:"container"},a?r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-half form-area"},r.a.createElement("div",{className:"content"},r.a.createElement(A,null))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement(Y,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"home-hero"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"has-text-grey"},r.a.createElement("span",{role:"img","aria-label":"cash emoji"},"\ud83d\udcb5")," cashflow.cool"),r.a.createElement("p",null,r.a.createElement("i",null,"Create your categories, track your spending, see where your money's going. Personal finance is cool")," \ud83d\ude0e")))),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-quarter"},r.a.createElement("div",{className:"content text"},r.a.createElement("p",null,"Manage and categorize your expenses in your Dashboard"))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"card center"},r.a.createElement("img",{src:"./images/first.png"}))))),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-half"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"card center"},r.a.createElement("img",{src:"./images/second.png"})))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content text"},r.a.createElement("p",null,"Add your own categories to track what's relevant to you")))),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"content text"},r.a.createElement("p",null,"Zoom in for monthly, weekly, or daily views of your spending"))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"card center"},r.a.createElement("img",{src:"./images/third.png"}))))),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"card center"},r.a.createElement("img",{src:"./images/fourth.png"})))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content text"},r.a.createElement("p",null,"View how much money you've put towards your categories // determine where most of your money is going and gain insight")))))))};function F(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Email required",e.password?e.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Password required",a}var I={name:"",email:"",password:""};var J=function(e){var a=S(I,F,function(){return y.apply(this,arguments)}),t=a.handleChange,n=a.handleBlur,l=a.handleSubmit,c=a.values,m=a.errors,i=a.isSubmitting,u=r.a.useState(!0),p=Object(s.a)(u,2),h=p[0],f=p[1],v=r.a.useState(null),b=Object(s.a)(v,2),g=b[0],N=b[1];function y(){return(y=Object(E.a)(d.a.mark(function a(){var t,n,r;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=c.name,n=c.email,r=c.password,a.prev=1,!h){a.next=8;break}return a.next=5,C.login(n,r);case 5:a.t0=a.sent,a.next=11;break;case 8:return a.next=10,C.register(t,n,r);case 10:a.t0=a.sent;case 11:a.t0,e.history.push("/"),a.next=19;break;case 15:a.prev=15,a.t1=a.catch(1),console.error("Authentication Error",a.t1),N(a.t1.message);case 19:case"end":return a.stop()}},a,null,[[1,15]])}))).apply(this,arguments)}return r.a.createElement("section",{className:"login section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"has-text-grey-light"},h?"login":"create account"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:l},!h&&r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"name",autoComplete:"off",name:"name",value:c.name,onChange:t}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:m.email?"input error-input":"input",type:"text",placeholder:"email",autoComplete:"off",name:"email",value:c.email,onChange:t,onBlur:n}))),m.email&&r.a.createElement("p",{className:"has-text-danger"},m.email),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:m.password?"input error-input":"input",type:"password",placeholder:"choose a password",name:"password",value:c.password,onChange:t,onBlur:n}))),m.password&&r.a.createElement("p",{className:"has-text-danger"},m.password),g&&r.a.createElement("p",{className:"has-text-danger"},g),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary",type:"submit",value:"Submit",disabled:i,style:{marginRight:"18px",background:i&&"grey"}},"submit"),r.a.createElement("button",{className:"button",type:"button",onClick:function(){return f(function(e){return!e})}},h?"need to create an account?":"already have an account?")),r.a.createElement(o.b,{className:"forgot-password",to:"/forgot"},"forgot password?")))))))};var R=function(){var e=r.a.useContext(w).firebase,a=r.a.useState(""),t=Object(s.a)(a,2),n=t[0],l=t[1],c=r.a.useState(!1),o=Object(s.a)(c,2),m=o[0],i=o[1],u=r.a.useState(null),p=Object(s.a)(u,2),h=p[0],f=p[1];function v(){return(v=Object(E.a)(d.a.mark(function a(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.resetPassword(n);case 3:i(!0),a.next=11;break;case 6:a.prev=6,a.t0=a.catch(0),console.error("\ud83d\udc80 \ud83d\udc80 \ud83d\udc80 error sending email",a.t0),f(a.t0.message),i(!1);case 11:case"end":return a.stop()}},a,null,[[0,6]])}))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("input",{type:"email",className:"input",placeholder:"provide your account email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return v.apply(this,arguments)}},"Reset Password")),m&&r.a.createElement("p",null,"check email for password reset link"),h&&r.a.createElement("p",{className:"has-text-danger"},h))};function T(e,a){var t={};return a.indexOf(e.newCategory)>-1&&(t.category="This category is already in the list... "),e.fact||(t.fact="Email required"),t}var W=function(){var e=r.a.useContext(w),a=e.user,t=e.preferences,n=(e.updatePreferences,e.firebase),l=S({fact:"...hmm?",categories:["Food","Gas","Videogames"],newCategory:""},T,function(){var e=m.newCategory;t.push(e),n.db.collection("users").doc(a.uid).set({categories:t}),m.newCategory=""},t),c=l.handleSubmit,o=l.handleChange,m=(l.handleBlur,l.values),i=l.errors,u=r.a.useState([]),d=Object(s.a)(u,2),E=(d[0],d[1],r.a.useState("")),p=Object(s.a)(E,2),h=(p[0],p[1],r.a.useState(!1)),f=Object(s.a)(h,2),v=f[0],b=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"has-text-primary"},"Category Manager"),r.a.createElement("p",{className:"change-month has-text-info",onClick:function(){return b(!v)}},r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"})," Add New Category"),r.a.createElement("div",{className:v?"modal is-active":"modal"},r.a.createElement("div",{onClick:function(){return b(!v)},className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},r.a.createElement("p",{className:"has-text-info"},r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," Add New Category")),r.a.createElement("button",{onClick:function(){return b(!v)},className:"delete","aria-label":"close"})),r.a.createElement("section",{className:"modal-card-body"}),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("button",{className:"button is-success"},"Save"),r.a.createElement("button",{onClick:function(){return b(!v)},className:"button"},"Cancel")))),r.a.createElement("table",{className:"table is-striped is-full-width"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Total Spent")),t.map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,e),r.a.createElement("td",null,r.a.createElement("div",{onClick:function(){!function(e){var r=t.indexOf(e);t.splice(r,1),window.confirm("you sure you want to delete this category?")&&n.db.collection("users").doc(a.uid).set({categories:t})}(e)}},r.a.createElement("a",{className:"delete is-pulled-right is-small"}))))}))))),r.a.createElement("div",{className:"column"},r.a.createElement("form",{onSubmit:c},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"New Category"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"newCategory",onChange:o,value:m.newCategory,placeholder:"add new category",autoComplete:"off",type:"text",className:"input"}),i.category&&r.a.createElement("p",{className:"has-text-danger"},i.category))),r.a.createElement("button",{className:"button full-width",type:"submit"},"Update Categories"))))};var Z=function(){var e=r.a.useContext(w),a=e.user,t=e.firebase,n=r.a.useState([]),l=Object(s.a)(n,2),c=l[0],o=l[1],m=r.a.useState([]),i=Object(s.a)(m,2),u=(i[0],i[1],r.a.useState(M()(Date.now()).format("MMMM"))),d=Object(s.a)(u,2),E=d[0],p=d[1],h=r.a.useState(M()(Date.now()).format("YYYY")),f=Object(s.a)(h,2),v=f[0],b=f[1],g=r.a.useState(!1),N=Object(s.a)(g,2),y=N[0],C=N[1];function x(e,n){t.db.collection("expenses").where("postedBy.id","==",a.uid).where("monthCreated","==",e).where("yearCreated","==",n).orderBy("category").orderBy("created","desc").onSnapshot(S)}function S(e){!function(e){var a=[],t=0;e.map(function(e){switch(t){case 0:a.push(e),t++;break;default:a[t-1].category===e.category?a[t-1].amount+=e.amount:(a.push(e),t++)}});var n=a.sort(function(e,a){return a.amount-e.amount});o(n)}(e.docs.map(function(e){return Object(k.a)({id:e.id},e.data())}))}return r.a.useEffect(function(){a&&function(){var e=M()(Date.now()).format("MMMM"),a=M()(Date.now()).format("YYYY");x(e,a)}()},[a]),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"has-text-primary"},"Monthly Expenses"),r.a.createElement("p",null,E," ",v," total amount spent per category"),r.a.createElement("p",{className:"change-month has-text-info",onClick:function(){return C(!y)}},r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"})," Change Month"),r.a.createElement("div",{className:y?"modal is-active":"modal"},r.a.createElement("div",{onClick:function(){return C(!y)},className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},r.a.createElement("p",{className:"has-text-info"},r.a.createElement("i",{className:"fa fa-calendar","aria-hidden":"true"})," Change Month")),r.a.createElement("button",{onClick:function(){return C(!y)},className:"delete","aria-label":"close"})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("p",null,"Currently showing expenses for ",E," ",v),r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:function(e){p(e.target.value)}},r.a.createElement("option",null,E),r.a.createElement("option",null,"January"),r.a.createElement("option",null,"February"),r.a.createElement("option",null,"March"),r.a.createElement("option",null,"April"),r.a.createElement("option",null,"May"),r.a.createElement("option",null,"June"),r.a.createElement("option",null,"July"),r.a.createElement("option",null,"August"),r.a.createElement("option",null,"September"),r.a.createElement("option",null,"October"),r.a.createElement("option",null,"November"),r.a.createElement("option",null,"December"))),"\xa0\xa0",r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:function(e){b(e.target.value)}},r.a.createElement("option",null,v)))),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("button",{onClick:function(){return function(e,a){x(e,a),C(!y)}(E,v)},className:"button is-success"},"Save"),r.a.createElement("button",{onClick:function(){return C(!y)},className:"button"},"Cancel")))),r.a.createElement("table",{className:"table is-striped is-full-width"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Total Spent")),c.map(function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.amount.toFixed(2)))})))))};var q=function(){var e=r.a.useContext(w),a=e.user,t=e.preferences,n=(e.firebase,r.a.useState([])),l=Object(s.a)(n,2),c=(l[0],l[1],r.a.useState([])),o=Object(s.a)(c,2),m=(o[0],o[1],r.a.useState(M()(Date.now()).format("MMMM"))),i=Object(s.a)(m,2),u=i[0],d=i[1],E=r.a.useState(M()(Date.now()).format("YYYY")),p=Object(s.a)(E,2),h=p[0],f=p[1],v=r.a.useState(!1),b=Object(s.a)(v,2),g=(b[0],b[1],r.a.useState([])),N=Object(s.a)(g,2);function y(e){d(e.target.value)}return N[0],N[1],r.a.useEffect(function(){},[a]),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"has-text-primary"},"Category Viewer"),r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:y},t.map(function(e){return r.a.createElement("option",null,e)}))),"\xa0\xa0",r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:y},r.a.createElement("option",null,u),r.a.createElement("option",null,"January"),r.a.createElement("option",null,"February"),r.a.createElement("option",null,"March"),r.a.createElement("option",null,"April"),r.a.createElement("option",null,"May"),r.a.createElement("option",null,"June"),r.a.createElement("option",null,"July"),r.a.createElement("option",null,"August"),r.a.createElement("option",null,"September"),r.a.createElement("option",null,"October"),r.a.createElement("option",null,"November"),r.a.createElement("option",null,"December"))),"\xa0\xa0",r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:function(e){f(e.target.value)}},r.a.createElement("option",null,h)))))};var U=function(){var e=r.a.useState("menu-monthly-expenses"),a=Object(s.a)(e,2),t=a[0],n=a[1];return r.a.createElement("div",{className:"Home section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",{className:"has-text-grey-light"},"Dashboard \ud83d\udcc8"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-one-quarter"},r.a.createElement("aside",{class:"menu"},r.a.createElement("ul",{class:"menu-list"},"menu-monthly-expenses"===t?r.a.createElement("li",{className:"has-background-white-ter"},r.a.createElement("a",null,"Monthly Expenses")):r.a.createElement("li",{onClick:function(){return n("menu-monthly-expenses")}},r.a.createElement("a",null,"Monthly Expenses")),"menu-category-viewer"===t?r.a.createElement("li",{className:"has-background-white-ter"},r.a.createElement("a",null,"Category Viewer")):r.a.createElement("li",{onClick:function(){return n("menu-category-viewer")}},r.a.createElement("a",null,"Category Viewer")),"menu-category-manager"===t?r.a.createElement("li",{className:"has-background-white-ter"},r.a.createElement("a",null,"Category Manager")):r.a.createElement("li",{onClick:function(){return n("menu-category-manager")}},r.a.createElement("a",null,"Category Manager"))))),"menu-monthly-expenses"===t&&r.a.createElement(Z,null),"menu-category-manager"===t&&r.a.createElement(W,null),"menu-category-viewer"===t&&r.a.createElement(q,null))))};var V=function(){var e=r.a.useState(null),a=Object(s.a)(e,2),t=a[0],n=a[1];return r.a.useEffect(function(){var e=C.auth.onAuthStateChanged(function(e){n(e||null)});return function(){return e()}},[]),t};var $=function(){var e=r.a.useState([]),a=Object(s.a)(e,2),t=a[0],n=a[1],l=V();function c(e){n(e.data().categories)}return r.a.useEffect(function(){l&&C.db.collection("users").doc(l.uid).onSnapshot(c)},[l]),r.a.createElement(o.a,null,r.a.createElement(w.Provider,{value:{user:l,preferences:t,updatePreferences:function(e){},firebase:C}},r.a.createElement(x,null),r.a.createElement("section",{className:"content-area"},l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{path:"/dashboard/",component:U})),r.a.createElement(m.a,{path:"/",exact:!0,component:P}),r.a.createElement(m.a,{path:"/login/",component:J}),r.a.createElement(m.a,{path:"/forgot/",component:R}))))};var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.2f4ce786.chunk.js.map